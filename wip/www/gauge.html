
<html>
<head>
    <title>TORCS SIM</title>
     <link rel="stylesheet" href="index.css">
    <script src="js/gauge.min.js"></script>
    
    <script>
      var rpmGauge, speedGauge, gear, gear1, steer, damage;
      var wheel;
      var steerMax = 0.366518 * 180.0 / Math.PI;
      var landscapeContainer;
      var gaugeSize = 200;
      
      function initState() {
		gear = document.getElementById('gear');
      	gear1 = document.getElementById('gear1');
      	//steer = document.getElementById('steer');
      	damage = document.getElementById('damage');
      	wheel = document.getElementById('wheel');
      	rpmGauge = document.gauges.get('rpm-gauge');
        speedGauge = document.gauges.get('speed-gauge');

        landscapeContainer = document.getElementById('landscapeContainer');        
      }
      
      initState();
      
	  function handleMsg(sensors) {
		
      	speedGauge.value = Math.ceil(sensors.speed);
      	rpmGauge.value = sensors.rpm;
      	gear1.innerHTML = sensors.gear==0 ? 'N' : (sensors.gear > 0 ? sensors.gear : 'R');

      	damage.innerHTML = sensors.damage;
      	
      	var angle = sensors.steer * steerMax;
      	wheel.style.transform = "rotate(" + (angle * -1.25) + "deg)";
    }
	  
	function logit() {
		console.log('resize', landscapeContainer.getAttribute('style','height'));
	}
    </script>

	<script>
      //var ws = new WebSocket('ws://localhost:8086/');
      //ws.onmessage = function (event) {
        //console.log("WS", event);
      //  handleMsg(JSON.parse(event.data));
      //};
	</script>
	
</head>
<body onresize="logit()" onload="initState()">
<div id="landscapeContainer"></div>

<div id="gaugeContainer">
	<canvas id="speed-gauge" style="gauge"
		data-type="radial-gauge"
        data-width="150"
        data-height="150"
        
        data-units="m/h"
        data-title="false"
        data-value="0"
        data-min-value="0"
        data-max-value="220"
        data-major-ticks="0,20,40,60,80,100,120,140,160,180,200,220"
        data-minor-ticks="2"
        data-stroke-ticks="false"
        data-highlights='[
            { "from": 0, "to": 50, "color": "rgba(0,255,0,.15)" },
            { "from": 50, "to": 150, "color": "rgba(255,255,0,.15)" },
            { "from": 150, "to": 220, "color": "rgba(0,0,255,.25)" }            
        ]'        
 
        
  		data-color-plate="#222"
        data-color-major-ticks="#f5f5f5"
        data-color-minor-ticks="#ddd"
        data-color-title="#fff"
        data-color-units="#ccc"
        data-color-numbers="#eee"
        data-color-needle-start="rgba(240, 128, 128, 1)"
        data-color-needle-end="rgba(255, 160, 122, .9)"
 
  		data-borders= "true"
        data-border-inner-width="0"
        data-border-middle-width="0"
        data-border-outer-width="3"
        data-color-border-outer="#fafafa"
        data-color-border-outer-end="#cdcdcd"
        
        data-value-box="true"
        data-color-value-box-rect="#222"
        data-color-value-box-rect-end="#222"
        data-color-value-box-background="#222"
        data-color-value-box-shadow="false"
        
        data-font-value="Led"
        data-color-value-text="#ff0"
        data-color-value-text-shadow="false"
        data-font-value-size="50"
        
        data-animation="false"      
        data-animated-value="false"
	>
  <!-- 
    -->	
	</canvas>
	<canvas id="rpm-gauge" style="gauge"
		data-type="radial-gauge"
        data-width="150"
        data-height="150"
        data-units="RPM"
        data-title="false"
        data-value="0"
        data-min-value="0"
        data-max-value="10000"
        data-major-ticks="0,1,2,3,4,5,6,7,8,9,10"
        data-minor-ticks="2"
        data-stroke-ticks="false"
        data-highlights='[
            { "from":8000, "to": 10000, "color": "rgba(255,0,0,1)" }
        ]'
        data-color-plate="#222"
        data-color-major-ticks="#f5f5f5"
        data-color-minor-ticks="#ddd"
        data-color-title="#fff"
        data-color-units="#ccc"
        data-color-numbers="#eee"
        data-color-needle-start="rgba(240, 128, 128, 1)"
        data-color-needle-end="rgba(255, 160, 122, .9)"
       
       	data-borders= "true"
        data-border-inner-width="0"
        data-border-middle-width="0"
        data-border-outer-width="3"
        data-color-border-outer="#fafafa"
        data-color-border-outer-end="#cdcdcd"
        
       
        data-value-box="false"
        data-font-value="Led"        
        data-animation="false"      
        data-animated-value="false"
	></canvas>
</div>

<div>
	<div id="gear1"></div>

	<div id="gear" style="background-color: gray; color: white; width: 100px; 
			border-style: solid; border-width: 2px; border-color: black; 
			text-align: center;">N</div>
	
	<div id="damage" style="background-color: gray; color: white; width: 100px; 
			border-style: solid; border-width: 2px; border-color: black; 
			text-align: center;">0</div>

</div>
<div id="wheel"></div>
</body>
</html>